<p-dialog
  [visible]="visible()"
  [modal]="true"
  [draggable]="false"
  [dismissableMask]="true"
  [style]="{ width: 'min(720px, 95vw)' }"
  [header]="isEditMode() ? 'Edit Product' : 'Add Product'"
  (onHide)="cancel()"
>
  <form [formGroup]="productForm" class="d-flex flex-column gap-3">
    <div class="d-flex flex-column">
      <label for="type">Type</label>
      <input pInputText id="type" formControlName="type" required />
      @if (fieldErrorFor('type')) {
        <small class="text-danger">{{ fieldErrorFor('type') }}</small>
      }
    </div>

    <div class="d-flex flex-column">
      <label for="brand">Brand</label>
      <input pInputText id="brand" formControlName="brand" required />
      @if (fieldErrorFor('brand')) {
        <small class="text-danger">{{ fieldErrorFor('brand') }}</small>
      }
    </div>

    <div class="d-flex flex-column">
      <label for="description">Description</label>
      <input pInputText id="description" formControlName="description" required />
      @if (fieldErrorFor('description')) {
        <small class="text-danger">{{ fieldErrorFor('description') }}</small>
      }
    </div>

    <div class="d-flex flex-column">
      <label for="price">Price</label>
      <p-inputNumber
        id="price"
        formControlName="price"
        [min]="0"
        [minFractionDigits]="2"
        [maxFractionDigits]="2"
        [useGrouping]="false"
        size="small"
        required
      />
      @if (fieldErrorFor('price')) {
        <small class="text-danger">{{ fieldErrorFor('price') }}</small>
      }
    </div>

    <div class="d-flex flex-column">
      <label for="quantity">Quantity</label>
      <p-inputNumber
        id="quantity"
        formControlName="quantity"
        [min]="0"
        [useGrouping]="false"
        size="small"
        required
      />
      @if (fieldErrorFor('quantity')) {
        <small class="text-danger">{{ fieldErrorFor('quantity') }}</small>
      }
    </div>

    <div class="d-flex justify-content-end gap-2">
      <p-button
        type="button"
        label="Cancel"
        severity="secondary"
        (onClick)="cancel()"
      />
      <p-button
        type="button"
        [label]="isEditMode() ? 'Update product' : 'Add product'"
        [disabled]="isLoading()"
        (onClick)="save()"
      />
    </div>
  </form>
</p-dialog>
