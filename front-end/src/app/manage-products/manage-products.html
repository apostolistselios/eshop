<h4 class="mb-3">Manage Products</h4>

<app-product-search [form]="filterForm" (search)="onSearch()" (reset)="onReset()" />

<div class="d-flex justify-content-end mb-2">
  <p-button
    type="button"
    label="Clear column filters"
    size="small"
    icon="pi pi-filter-slash"
    severity="secondary"
    (onClick)="onClearColumnFilters()"
  />
</div>

<p-table
  #productsTable
  [value]="products()"
  [paginator]="true"
  [rows]="rows"
  [rowsPerPageOptions]="[5, 10, 20]"
  [lazy]="true"
  [totalRecords]="totalRecords()"
  [tableStyle]="{ 'min-width': '60rem' }"
  (onLazyLoad)="onLazyLoad($event)"
  sortMode="multiple"
  filterDisplay="menu"
  size="small"
>
  <ng-template pTemplate="header">
    <tr class="table-light">
      <th pSortableColumn="type">
        Type
        <p-sortIcon field="type" />
        <p-columnFilter field="type" matchMode="contains" display="menu" />
      </th>
      <th pSortableColumn="brand">
        Brand
        <p-sortIcon field="brand" />
        <p-columnFilter field="brand" matchMode="contains" display="menu" />
      </th>
      <th pSortableColumn="description">
        Description
        <p-sortIcon field="description" />
        <p-columnFilter field="description" matchMode="contains" display="menu" />
      </th>
      <th class="text-end" pSortableColumn="price">
        Price
        <p-sortIcon field="price" />
        <p-columnFilter field="price" type="numeric" display="menu" />
      </th>
      <th class="text-end" pSortableColumn="quantity">
        Quantity
        <p-sortIcon field="quantity" />
        <p-columnFilter field="quantity" type="numeric" display="menu" />
      </th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-product>
    <tr>
      <td>{{ product.type }}</td>
      <td>{{ product.brand }}</td>
      <td>{{ product.description }}</td>
      <td class="text-end">$ {{ product.price }}</td>
      <td class="text-end">{{ product.quantity }}</td>
    </tr>
  </ng-template>
  <ng-template pTemplate="emptymessage">
    <tr>
      <td colspan="5">No products found.</td>
    </tr>
  </ng-template>
</p-table>
