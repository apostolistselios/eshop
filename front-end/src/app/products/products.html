<p-card header="Search Products" class="mb-3">
  <form [formGroup]="filterForm">
    <div class="row">
      <div class="col-md-4 d-flex flex-column mb-2">
        <label for="type">Type</label>
        <input pInputText id="type" formControlName="type" placeholder="Product type" pSize="small" />
      </div>

      <div class="col-md-4 d-flex flex-column mb-2">
        <label for="brand">Brand</label>
        <input pInputText id="brand" formControlName="brand" placeholder="Brand name" pSize="small" />
      </div>

      <div class="col-md-4 d-flex flex-column mb-2">
        <label for="description">Description</label>
        <input
          pInputText
          id="description"
          formControlName="description"
          placeholder="Product description"
          pSize="small"
        />
      </div>

      <div class="col-md-2 d-flex flex-column mb-2">
        <label for="minPrice">Min Price</label>
        <p-inputNumber id="minPrice" formControlName="minPrice" [min]="0" [useGrouping]="false" size="small" />
      </div>

      <div class="col-md-2 d-flex flex-column mb-2">
        <label for="maxPrice">Max Price</label>
        <p-inputNumber id="maxPrice" formControlName="maxPrice" [min]="0" [useGrouping]="false" size="small" />
      </div>

      <div class="col-md-2 d-flex flex-column mb-2">
        <label for="minQuantity">Min Quantity</label>
        <p-inputNumber id="minQuantity" formControlName="minQuantity" [min]="0" [useGrouping]="false" size="small" />
      </div>

      <div class="col-md-2 d-flex flex-column mb-2">
        <label for="maxQuantity">Max Quantity</label>
        <p-inputNumber id="maxQuantity" formControlName="maxQuantity" [min]="0" [useGrouping]="false" size="small" />
      </div>
    </div>

    <div class="d-flex justify-content-end gap-2">
      <p-button
        type="button"
        label="Reset"
        size="small"
        icon="pi pi-refresh"
        severity="secondary"
        (onClick)="onReset()"
      />
      <p-button type="button" label="Search" size="small" icon="pi pi-search" (onClick)="onSearch()" />
    </div>
  </form>
</p-card>

<h4>Products</h4>

<p-dataview
  [value]="products()"
  layout="grid"
  [rows]="itemsPerPage"
  [paginator]="true"
  [totalRecords]="totalRecords()"
  [lazy]="true"
  (onPage)="onPageChange($event)"
>
  <ng-template #grid let-items>
    <div class="row">
      @for (item of items; track item.id) {
        <div class="col-4 pb-2">
          <p-card>
            <ng-template #title> {{ item.type }} - {{ item.brand }}</ng-template>

            <ng-template #content>
              <p>{{ item.description }}</p>
              <div class="d-flex flex-column gap-1">
                <span class="fw-bold">$ {{ item.price }}</span>
                <span class="text-muted">{{ item.quantity }} in stock</span>
              </div>
              <p-button
                severity="success"
                size="small"
                styleClass="float-end"
                icon="pi pi-cart-arrow-down"
                label="Add to cart"
                [disabled]="item.quantity === 0"
              />
            </ng-template>
          </p-card>
        </div>
      }
    </div>
  </ng-template>
</p-dataview>
